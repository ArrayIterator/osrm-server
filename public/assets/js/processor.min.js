/*! leaflet map processor - 1.0.2 */
"use strict";!function(e){const t="1.0.2";let o,n,r,a=document.currentScript?document.currentScript.src:null,l=e.document.head;if(a){let e=["/css/map.package.css"],t=a.split("/").slice(0,-2).join("/").replace(/^https?:/gi,"");for(let a=0;e.length>a;a++){o=!1,r=t+e[a];for(let e=0;document.styleSheets.length>e;e++){o=r===document.styleSheets[e].toString().replace(/^https?:/gi,"")}if(!o){if((n=document.createElement("link")).rel="stylesheet",n.href=r,l.getElementsByTagName("title").length){l.prepend(l.getElementsByTagName("title")[0],n);continue}l.prepend(n)}}}if(void 0!==e.LogislyObjectMap)return void console.log("LogislyObjectMap has been loaded before. If you feel this not true. Please check your javascript");L.LatLng.prototype.bearingTo=function(e){let t=Math.PI/180,o=180/Math.PI,n=this.lat*t,r=e.lat*t,a=(e.lng-this.lng)*t,l=Math.sin(a)*Math.cos(r),i=Math.cos(n)*Math.sin(r)-Math.sin(n)*Math.cos(r)*Math.cos(a);return(parseInt(Math.atan2(l,i)*o)+360)%360},L.windowLoad=(t=>{"function"==typeof t&&e.addEventListener("load",function(e){t.call(L,L,e,this)})}),L.LogislyMap=((...e)=>new d(...e));const i="_map-",s=.5,c="google",p="standard",m={google:{name:"Google Map",subdomains:["",1,2,3],mode:{standard:"https://mt{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",road:"https://mt{s}.google.com/vt/lyrs=h&x={x}&y={y}&z={z}",roadmap:"https://mt{s}.google.com/vt/lyrs=r&x={x}&y={y}&z={z}",hybrid:"https://mt{s}.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",satellite:"https://mt{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",terrain:"https://mt{s}.google.com/vt/lyrs=t&x={x}&y={y}&z={z}"}},osm:{name:"Open Street Map",mode:{standard:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",road:"https://tile-{s}.openstreetmap.fr/hot/{z}/{x}/{y}.png",hybrid:"https://dev.{s}.tile.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png"}},esri:{name:"Esri",mode:{satellite:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",terrain:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}"}},openmapsurfer:{name:"Open Map Surfer",mode:{road:"https://maps.heigit.org/openmapsurfer/tiles/roads/webmercator/{z}/{x}/{y}.png"}},wikimedia:{name:"Wikimedia",mode:{standard:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png"}}},u={lat:{min:-11.04,max:5.98},lon:{min:94.9,max:141.1}},f=function(){function e(){e.prototype=e,e.prototype.constructor=e,e.leaflet=L,e.VERSION=t,e.defaultMap=c,e.defaultMode=p,e.defaultBounds=new e.leaflet.LatLngBounds(new e.leaflet.LatLng(u.lat.min-s,u.lon.min-s),new e.leaflet.LatLng(u.lat.max+s,u.lon.max+s)),e._type=c,e._mode=p,e._lastId=null,e.getId=function(){return this._lastId||this.createId()},e.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e.createId=function(){let e=i+this.uuid(),t=document.createElement("div");return t.setAttribute("data-map-id",e),t.setAttribute("class","leaflet-logisly-map"),this._lastId=t,this._lastId},e.init=function(e){return"function"==typeof this._prepare&&this._prepare.call(this,this),"function"==typeof e&&e.call(this,this),"function"==typeof this.always&&this.always.call(this,this),this},e._success=null,e._error=null,e._always=null,e._prepare=null,e.onBeforeProcess=function(e){return this._prepare=e,this},e.onSuccess=function(e){return this._success=e,this},e.onError=function(e){return this._error=e,this},e.onAlways=function(e){return this._always=e,this},e.availableMapModes=m,this&&(this.prototype=e,this._type=e._type,this._mode=e._mode,this._success=e._success,this._error=e._error,this._prepare=e._prepare,this._lastId=e._lastId);for(let t in e.leaflet)e.leaflet.hasOwnProperty(t)&&(e[t]=e.leaflet[t])}return e.prototype.constructor=new e,Object.seal(e)}(),d=function(e,t){let o,n,r,a=new f,l=a.defaultBounds,i={},s=[],u=[],d={},y=e=>e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),h=(t,o)=>{if(o.detectRetina=o.detectRetina||!0,null!==o.subdomains&&"object"==typeof o.subdomains||"string"!=typeof o.subdomains&&delete o.subdomains,e.tileLayerCallback)try{let n=e.tileLayerCallback.call(a,t,o,a);if("object"==typeof n)return n;throw new Error("Tile Layer Callback Invalid Return Type")}catch(e){console.log(e)}return a.tileLayer(t,o)},g=(e,t,o)=>{if("object"!=typeof o&&(o={}),!m[t])return;let n=m[t],r=n.mode;return r[e]?(o.detectRetina=o.detectRetina||!0,n.subdomains?o.subdomains=n.subdomains:Object.isFrozen(o)&&delete o.subdomains,a.createTileLayer(r[e],o)):void 0};(e&&"string"==typeof e||Object.prototype.toString.call(e).match(/^\[object\s+HTML.*lement]/gi))&&("object"==typeof t?void 0===(e=t).selector&&(e.selector=t):e={selector:t}),e&&"object"==typeof e||(e={}),e.tileLayerCallback=e.tileLayerCallback||null,"function"!=typeof e.tileLayerCallback&&(e.tileLayerCallback=null),e.forceTile=e.forceTile||null,e.forceTile&&"object"==typeof e.forceTile||(e.forceTile=null),e.forceTile&&(e.forceTile.uri&&"string"==typeof e.forceTile.uri&&e.forceTile.uri.match(/^https?:\/\/.+\.[a-z]+/gi)&&e.forceTile.uri.match(/[xyz]/gi)||(e.forceTile=null),e.forceTile&&(e.forceTile.name=e.forceTile.name||"custom",e.forceTile.name&&"string"==typeof e.forceTile.name||(e.forceTile.name="custom"),e.forceTile.prefix&&"string"==typeof e.forceTile.prefix||(e.forceTile.prefix="")));let _={preferCanvas:!0,zoomControl:!0,dragging:!0,closePopupOnClick:!0,doubleClickZoom:!0,trackResize:!0,enableMapControl:!0,zoomAnimation:!0,fadeAnimation:!0,useCache:!1,attributionControl:!1,zoomSnap:1,zoomDelta:1,minZoom:5,maxZoom:18,zoom:5,zoomAnimationThreshold:4,mode:p,type:c};for(let t in _)_.hasOwnProperty(t)&&(e[t]=void 0===e[t]?_[t]:e[t]);e.preferCanvas=!!e.preferCanvas,e.zoomControl=!!e.zoomControl,e.useCache=!!e.useCache,e.attributionControl=!!e.attributionControl,void 0!==e.saveToCache?e.saveToCache=!!e.saveToCache:e.saveToCache=e.useCache,e.dragging=!!e.dragging,e.closePopupOnClick=!!e.closePopupOnClick,e.doubleClickZoom=!!e.doubleClickZoom,e.trackResize=!!e.trackResize,"string"==typeof e.zoomSnap&&e.zoomSnap.match(/^[0-9\s]+/g)&&(e.zoomSnap=parseInt(e.zoomSnap)),"string"==typeof e.zoomDelta&&e.zoomDelta.match(/^[0-9\s]+/g)&&(e.zoomDelta=parseInt(e.zoomDelta)),"string"==typeof e.minZoom&&e.minZoom.match(/^[0-9\s]+/g)&&(e.minZoom=parseInt(e.minZoom)),"string"==typeof e.maxZoom&&e.maxZoom.match(/^[0-9\s]+/g)&&(e.maxZoom=parseInt(e.maxZoom)),"string"==typeof e.zoomAnimationThreshold&&e.zoomAnimationThreshold.match(/^[0-9\s]+/g)&&(e.zoomAnimationThreshold=parseInt(e.zoomAnimationThreshold)),"string"==typeof e.zoom&&e.zoom.match(/^[0-9\s]+/g)&&(e.zoom=parseInt(e.zoom)),e.zoomSnap="number"!=typeof e.zoomSnap?_.zoomSnap:e.zoomSnap,e.zoomDelta="number"!=typeof e.zoomDelta?_.zoomDelta:e.zoomDelta,e.minZoom="number"!=typeof e.minZoom?_.minZoom:e.minZoom,e.maxZoom="number"!=typeof e.maxZoom?_.maxZoom:e.maxZoom,e.minZoom=e.minZoom<0?0:e.minZoom,e.minZoom=e.minZoom>18?18:e.minZoom,e.maxZoom=e.maxZoom<0?0:e.maxZoom,e.maxZoom=e.maxZoom>18?18:e.maxZoom,e.zoomAnimationThreshold="number"!=typeof e.zoomAnimationThreshold?_.zoomAnimationThreshold:e.zoomAnimationThreshold,e.zoom="number"!=typeof e.zoom?_.zoom:e.zoom,null!==e.maxBounds&&(e.maxBounds=e.maxBounds||l),e.layers=e.layers||[],e.maxBoundsViscosity=e.maxBoundsViscosity||1,e.zoomAnimation=!!e.zoomAnimation,e.fadeAnimation=!!e.fadeAnimation,e.center=e.center||l.getCenter();let x=!1;!e.mode&&e.forceTile&&(x=!0),e.mode=e.mode||p,e.type=e.type||c,void 0===e.enableMapControl&&void 0!==e.enableControl&&(e.enableMapControl=!!e.enableControl),e.enableMapControl=!!e.enableMapControl,a._type=e.type&&"string"==typeof e.type&&e.type.toString().match(/(open|osm|openstreetmap)/gi)?"osm":"string"==typeof e.type?e.type.toString().toLowerCase():c,void 0===m[a._type]&&(a._type=c),void 0===m[a._type].mode[e.mode]&&(e.mode=p);let b=e.type,z=e.mode;a._mode=e.mode,r=e.selector||null;let T=e.enableMapControl&&!x,C=a.DomEvent,w=a.getId();a._element=w,C.on(window,"resize",e=>{w.style.position="relative",w.style.height=window.innerHeight+"px",w.style["min-height"]="100%",w.style["min-width"]="100%",w.style.width=window.innerWidth+"px",w.style["max-width"]="100%",w.style["max-height"]="100%",C.stopPropagation(e)}),a._current=null,a._layers=null,a.createLayer=g,a.createTileLayer=h,a.fitZoom=function(...e){return e[0]=e[0]||a._current.getBounds(),a.fitBounds(...e)},a.fitBounds=function(...e){return e[0]&&"object"==typeof e[0]&&"object"==typeof e[0]._map&&"function"==typeof e[0].getBounds&&(e[0]=e[0].getBounds()),e[0]=e[0]||a._current.getBounds(),a._current.fitBounds(...e),a},a.fitCenter=function(...e){return e[0]&&"object"==typeof e[0]&&"function"==typeof e[0].getCenter&&(e[0]=e[0].getCenter()),e[0]=e[0]||a._current.getCenter(),a._current.flyTo(...e),a},a.zoom=function(...e){return a._current.setZoom(...e),a},a.encode=function(e){return a.PolylineUtil.encode(e)},a.decode=function(e){return a.PolylineUtil.decode(e)},a.remoteJSON=((e,t)=>{let o=new XMLHttpRequest;t&&"object"==typeof t||(t={});let n=t.method||"GET";if(o.open(n,e),o.setRequestHeader("Accept","application/json"),t&&t.headers&&"object"==typeof t.headers)for(let e in t.headers)t.headers.hasOwnProperty(e)&&"string"==typeof e&&o.setRequestHeader(e,t.headers[e]);return"function"==typeof t.progress&&(o.onprogress=t.progress),t.error&&(o.onerror=t.error),o.responseType=t.type||"json",o.onload=function(){200===o.status?"function"==typeof t.success&&t.success.call(o,o.response,o,a):"function"==typeof t.error&&t.error(o)},"function"==typeof t.beforeSend?t.beforeSend(o):"function"==typeof t.beforesend&&t.beforesend(o),o.send(t.body||null),o});let v=!1;a.getMap=function(){return this._current},a.init=function(t,l){let s,c=this instanceof f?this:a;if(!0===v)return c;c._current=null,v=!0;try{n=c.map(a._element,e),c._current=n,c._current.logislyMap=c;for(let e in c)c.hasOwnProperty(e)&&(c._current.hasOwnProperty(e)||c._current[e]||(c._current[e]=c[e]));for(let e in c.prototype)c.prototype.hasOwnProperty(e)&&(c._current.hasOwnProperty(e)||c._current[e]||(c._current[e]=c.prototype[e]));let p;n.on({layeradd:()=>{window.dispatchEvent(new Event("resize"))},layerremove:()=>{window.dispatchEvent(new Event("resize"))}}),e.zoomControl&&c._current.zoomControl.setPosition("topright"),!1!==e.enableScale&&c.control.scale().addTo(c._current),T&&c.control.layers(i,null,{sortLayers:!1,collapsed:!0,position:"topright"}).addTo(c._current),o&&o.addTo(c._current),"function"==typeof c._prepare&&(p=c._prepare.call(c,c._current,c));let m=()=>{c._current=function(e){if(!e._container||"function"!=typeof e._container.getAttribute)return;let t,o=e._container.getAttribute("data-map-id");o?t=document.querySelector("[data-map-id="+o+"]"):o=null;let n=r;"string"==typeof r&&(r.match(/^#/g)||r.match(/^[a-z0-9_-]+$/gi)?n=document.getElementById(r.replace(/^#/g,"")):r.match(/^\./g)&&(n=document.getElementsByClassName(r.replace(/^\./g,""))));let a=Object.prototype.toString.call(n);if(a.match(/^\[object\s+HTML.*lement]/gi))if(o){let t=n.querySelector("#"+o);t?t.replaceWith(e._container):n.append(e._container)}else n.append(e._container);else if(a.match(/^\[object\s+(NodeList|HTMLCollection)]/gi))for(let t=0;n.length>t;t++){let r=n[t].querySelector("#"+o);r?r.replaceWith(e._container):n[t].append(e._container)}else t&&t.append(e._container);return e}(a._current),"function"==typeof c._success&&(s=c._current,c._success.call(c,s,c)),"function"==typeof t&&t.call(c,null,c._current,c)};p&&p instanceof Promise?p.catch(e=>{throw e}).finally(()=>{m(),window.dispatchEvent(new Event("resize"))}):m()}catch(e){c._current||(c._current=void 0),s=e,"function"==typeof l?l.call(c,s):"function"===t&&t.call(c,e,c._current,c),"function"==typeof c._error&&c._error.call(c,e,c)}return"function"==typeof c._always&&c._always.call(c,s,c),c};for(let t in e){if(!e.hasOwnProperty(t))continue;if(!t.toString().match(/^disable_?/gi))continue;let o=/^disable_?map_?(.+)$/gi.exec(t);o&&o[1]&&s.push(o[1].toLowerCase()),(o=/^disable_?mode_?(.+)$/gi.exec(t))&&o[1]&&u.push(o[1].toLowerCase()),(o=/^disable_?([a-z]{2,}_?)mode_?(.+)$/gi.exec(t))&&o[1]&&o[2]&&(d[o[1].toLowerCase()]=o[2].toLowerCase())}if(o=null,e.forceTile)try{let t='<span class="leaflet-logisly-map-layer-selector"><span class="leaflet-logisly-map-layer-provider">'+y(e.forceTile.prefix)+'</span> <span class="leaflet-logisly-map-layer-_mode">'+y(e.forceTile.name)+"</span></span>";"boolean"!=typeof e.forceTile.useCache&&(e.forceTile.useCache=e.useCache),e.forceTile.useCache?e.forceTile.saveToCache=!0:"boolean"!=typeof e.forceTile.saveToCache&&(e.forceTile.saveToCache=e.saveToCache),o=h(e.forceTile.uri,e.forceTile),i[t]=o}catch(e){o=null}if(!x&&T)for(let t in m)if(m.hasOwnProperty(t))for(let n in m[t].mode){if(!m[t].mode.hasOwnProperty(n))continue;let r='<span class="leaflet-logisly-map-layer-selector"><span class="leaflet-logisly-map-layer-provider">'+y(m[t].name)+'</span> <span class="leaflet-logisly-map-layer-_mode">'+y(n)+"</span></span>",a=g(n,t,{id:t+":"+n,useCache:e.useCache,saveToCache:e.saveToCache});null===o&&t===b&&z===n&&(o=a),s.indexOf(t)>-1||(u.indexOf(n)>-1||d[t]&&d[t]===n||(i[r]=a))}if(null===o){let t='<span class="leaflet-logisly-map-layer-selector"><span class="leaflet-logisly-map-layer-provider">'+y(m[b].name)+'</span> <span class="leaflet-logisly-map-layer-_mode">'+y(z)+"</span></span>";o=g(z,b,{id:b+":"+z,useCache:e.useCache,saveToCache:e.saveToCache}),i[t]=o}return a._layers=i,a};e.LogislyObjectMap=f,e.LogislyMap=Object.freeze(d)}(window);